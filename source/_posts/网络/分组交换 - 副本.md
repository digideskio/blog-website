category: 计算机基础
date: 2015-11-05
title: tcpdump,VLAN,NAT,ip route
---
## 第一题：
用tcpdump、tshark等工具来来分析arp请求报文和应答报文，对照截获的数据，做出ARP请求应答的逻辑分析，建议本机安装虚拟机来进行测试和实践。

## 第二题：
如果一个VLAN交换机的所有端口都是Trunk模式，则意味着什么？

### NAT原理
网络地址转换(NAT,Network Address Translation)属接入广域网(WAN)技术，是一种将私有（保留）地址转化为合法IP地址的转换技术. 这种技术会在网关上保持一个session, session中保存一个内网与网关,网关与公网的映射关系. NAT实际上就是一个代理，代理NAT内部的所有机器

NAT有俩种实现技术：
* NAT: 将内网的IP地址替换为网关的IP地址，但是将内网的端口与网关端口进行绑定,也就是公网见到的端口是内网的端口,但是见到的IP是网关的地址.
* NAPT：	使用网关的IP，但端口会选择一个和临时会话对应的临时端口. 这种公网见到的IP地址和端口都是网关设定的.

由于内网可能会跟公网建立俩个连接都采用不同的端口,因此NAPT针对这种情况又分为了俩种类型(需要说明的是不管是那种类型只要建立一个连接就会在网关中建立一个session)
* Symmetric NAT型 (对称型): 来自同一个内网的ip俩个seesion会在网关上分配到俩个不同的端口.
* Cone NAT型（圆锥型）:来自同一个内网的ip俩个seesion会在网关上分配同一个端口

Cone NAT又分了3种类型：
* Full Cone NAT（完全圆锥型）：这种NAT，网关会根据session信息将公网发送过来的数据报都都发送到某个内网主机上.
* Address Restricted Cone NAT （地址限制圆锥型）：这种NAT上的内网不会主动接受陌生公网主机的数据报,只有内网向公网主机发送过请求,才会接受那个公网的数据报.
* Port Restricted Cone NAT（端口限制圆锥型）：和第二种NAT类似同样是不会主动接受陌生公网主机的数据报,但是这种NAT更加严苛的是还有端口限制,也就是说它只会接受向某个公网端口发送给请求的数据报.

Linux的NAT是对称NAT，而不是锥形NAT.

## 第三题：
说明下NAT在Linux中实现的原理和大致做法。

## 第四题：
路由的原理和机制是什么？解释下Linux里 ip route命令的结果。

## 第五题：
说说你所理解高性能网络编程的几个重要因素和他们之间的相互关系